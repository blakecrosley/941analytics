name = "941-analytics"
main = "src/index.ts"
compatibility_date = "2024-01-01"
account_id = "0cbfc64a7f11a17453d2cb691107fa45"

# D1 Database binding
[[d1_databases]]
binding = "DB"
database_name = "941-analytics"
database_id = "243ae7ac-3f21-4287-a665-4ee624dd0d49"

# KV namespace for rate limiting
[[kv_namespaces]]
binding = "RATE_LIMIT_KV"
id = "102b222e36ef416298b3414fa9d294a5"

# Scheduled triggers for daily aggregation
[triggers]
crons = ["0 2 * * *"]  # Run at 2 AM UTC daily

[vars]
# Allowed origins (comma-separated domains)
ALLOWED_ORIGINS = "941return.com,941getbananas.com,resumegeni.com,acecitizenship.app,blakecrosley.com"
# Set via wrangler secret put ANALYTICS_SECRET
# ANALYTICS_SECRET = ""
